<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage 6: AI-Powered Compiler Optimization Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .section h3 {
            color: #764ba2;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .code-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 10px;
            resize: vertical;
            background: #fff;
        }
        
        .code-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .output::-webkit-scrollbar {
            width: 10px;
        }
        
        .output::-webkit-scrollbar-track {
            background: #1a202c;
        }
        
        .output::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 5px;
        }
        
        .output .highlight {
            color: #fbbf24;
            font-weight: bold;
        }
        
        .output .success {
            color: #34d399;
        }
        
        .output .info {
            color: #60a5fa;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .feature-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .feature-item:last-child {
            border-bottom: none;
        }
        
        .feature-label {
            color: #666;
            font-weight: 500;
        }
        
        .feature-value {
            color: #333;
            font-weight: 600;
        }
        
        .optimization-list {
            margin-top: 20px;
        }
        
        .optimization-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #34d399;
        }
        
        .optimization-item.skipped {
            border-left-color: #ef4444;
            opacity: 0.7;
        }
        
        .optimization-title {
            color: #667eea;
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .optimization-desc {
            color: #666;
            margin-bottom: 10px;
        }
        
        .optimization-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .stat-value {
            color: #333;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .training-example {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #667eea;
        }
        
        .example-code {
            font-family: 'Courier New', monospace;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .example-time {
            color: #666;
            font-size: 0.9em;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #666;
            font-weight: 600;
            font-size: 16px;
            position: relative;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #667eea;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }
        
        .tab:hover {
            color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .summary-box h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .summary-stat {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .summary-stat-label {
            opacity: 0.9;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        .summary-stat-value {
            font-size: 2em;
            font-weight: 700;
        }
        
        .info-box {
            background: #e6f2ff;
            border-left: 4px solid #60a5fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .info-box p {
            color: #1e40af;
            line-height: 1.6;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI-Powered Compiler Optimization</h1>
            <p>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</p>
        </div>
        
        <div class="content">
            <!-- –°–µ–∫—Ü–∏—è 1: –í–≤–µ–¥–µ–Ω–∏–µ -->
            <div class="section">
                <h2>üéØ –û –ø—Ä–æ–µ–∫—Ç–µ</h2>
                <p style="line-height: 1.8; color: #555;">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤! –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã 
                    –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞. –ú—ã –∂–µ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è 
                    <strong>—É—á–∏—Ç—Å—è</strong> –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
                </p>
                
                <h3>üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3>
                <p style="line-height: 1.8; color: #555; margin-top: 10px;">
                    –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç:
                </p>
                
                <div class="features-grid" style="margin-top: 20px;">
                    <div class="feature-card">
                        <h4>üëÅÔ∏è Feature Extractor</h4>
                        <p style="color: #666; line-height: 1.6;">
                            –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤, –æ–ø–µ—Ä–∞—Ü–∏–π, 
                            —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –≤ –Ω–∞–±–æ—Ä —á–∏—Å–µ–ª, –ø–æ–Ω—è—Ç–Ω—ã—Ö –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üéØ Neural Network</h4>
                        <p style="color: #666; line-height: 1.6;">
                            –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ –±–µ–∑ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –û–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 
                            –∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –±—ã—Å—Ç—Ä–æ–º—É –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º—É –∫–æ–¥—É.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚ö° Strategy Selector</h4>
                        <p style="color: #666; line-height: 1.6;">
                            –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π. –í—ã–±–∏—Ä–∞–µ—Ç —Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, 
                            –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–¥—É—Ç –Ω–∞–∏–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–¥–∞.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è 2: –û–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ -->
            <div class="section">
                <h2>üìö –®–∞–≥ 1: –û–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏</h2>
                <p style="line-height: 1.8; color: #555; margin-bottom: 20px;">
                    –°–Ω–∞—á–∞–ª–∞ –º—ã –¥–æ–ª–∂–Ω—ã –æ–±—É—á–∏—Ç—å –Ω–µ–π—Ä–æ–Ω–Ω—É—é —Å–µ—Ç—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–æ–¥–∞. –ú—ã –ø–æ–∫–∞–∂–µ–º –µ–π —Ä–∞–∑–ª–∏—á–Ω—ã–µ 
                    —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∏—Ö —Ä–µ–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏ –æ–Ω–∞ –Ω–∞—É—á–∏—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
                </p>
                
                <div class="info-box">
                    <p>
                        <strong>üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ:</strong> –ú—ã —Å–æ–∑–¥–∞—ë–º —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ 
                        —Ä–∞–∑–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –∏–∑–º–µ—Ä—è–µ–º –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏ –æ–±—É—á–∞–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—å 
                        —Å–≤—è–∑—å –º–µ–∂–¥—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –∫–æ–¥–∞ –∏ –µ–≥–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é. –ß–µ–º –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤, —Ç–µ–º —Ç–æ—á–Ω–µ–µ 
                        –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è!
                    </p>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="startTraining()">
                        üöÄ –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ (100 —ç–ø–æ—Ö)
                    </button>
                    <button class="btn btn-secondary" onclick="generateTrainingData()">
                        üìä –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
                    </button>
                </div>
                
                <div id="trainingOutput"></div>
                <div id="trainingProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
                    </div>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è 3: –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ -->
            <div class="section">
                <h2>üîç –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞</h2>
                <p style="line-height: 1.8; color: #555; margin-bottom: 20px;">
                    –í–≤–µ–¥–∏—Ç–µ JavaScript —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ—á—ë—Ç –µ—ë 
                    —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –ø—Ä–µ–¥—Å–∫–∞–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
                </p>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchTab(0)">–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä</button>
                    <button class="tab" onclick="switchTab(1)">–°–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä</button>
                    <button class="tab" onclick="switchTab(2)">–°–≤–æ–π –∫–æ–¥</button>
                </div>
                
                <div class="tab-content active" id="tab0">
                    <textarea class="code-input" id="codeInput0">function fibonacci(n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}</textarea>
                </div>
                
                <div class="tab-content" id="tab1">
                    <textarea class="code-input" id="codeInput1">function processData(data) {
    var result = [];
    for (var i = 0; i < data.length; i++) {
        var item = data[i];
        if (item > 0) {
            for (var j = 0; j < item; j++) {
                result.push(item * j);
            }
        }
    }
    return result;
}</textarea>
                </div>
                
                <div class="tab-content" id="tab2">
                    <textarea class="code-input" id="codeInput2" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –∑–¥–µ—Å—å..."></textarea>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="analyzeCode()">
                        üî¨ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                    </button>
                    <button class="btn btn-secondary" onclick="clearOutput()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                </div>
                
                <div id="analysisOutput"></div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è 4: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="section" id="resultsSection" style="display: none;">
                <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                
                <div class="summary-box">
                    <h3>–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="summary-stat-label">–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</div>
                            <div class="summary-stat-value" id="baselinePerf">-</div>
                        </div>
                        <div class="summary-stat">
                            <div class="summary-stat-label">–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π</div>
                            <div class="summary-stat-value" id="optimizedPerf">-</div>
                        </div>
                        <div class="summary-stat">
                            <div class="summary-stat-label">–£—Å–∫–æ—Ä–µ–Ω–∏–µ</div>
                            <div class="summary-stat-value" id="improvement">-</div>
                        </div>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px;">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫–æ–¥–∞</h3>
                <div id="featuresDisplay" class="features-grid"></div>
                
                <h3 style="margin-top: 30px;">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</h3>
                <div id="optimizationsDisplay" class="optimization-list"></div>
            </div>
        </div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à–∏ –º–æ–¥—É–ª–∏ -->
    <script src="stage6-feature-extractor.js"></script>
    <script src="stage6-neural-network.js"></script>
    <script src="stage6-optimization-selector.js"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∞–¥–∏–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ -->
    <script src="stage1-lexer.js"></script>
    <script src="stage2-parser.js"></script>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let neuralNetwork = null;
        let featureExtractor = null;
        let optimizationSelector = null;
        let trainingData = [];
        let currentTab = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            console.log('Initializing AI Compiler Optimization Demo...');
            
            // –°–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤
            featureExtractor = new window.CompilerStage6.CodeFeatureExtractor();
            
            // –ù–µ–π—Ä–æ—Å–µ—Ç—å —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π: 33 –≤—Ö–æ–¥–∞ -> 64 —Å–∫—Ä—ã—Ç—ã—Ö -> 32 —Å–∫—Ä—ã—Ç—ã—Ö -> 1 –≤—ã—Ö–æ–¥
            neuralNetwork = new window.CompilerStage6.NeuralNetwork([33, 64, 32, 1]);
            
            optimizationSelector = new window.CompilerStage6.OptimizationStrategySelector();
            
            console.log('‚úì Feature Extractor initialized');
            console.log('‚úì Neural Network initialized');
            console.log('‚úì Optimization Selector initialized');
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        function switchTab(index) {
            currentTab = index;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            contents.forEach((content, i) => {
                if (i === index) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateTrainingData() {
            console.log('Generating training data...');
            trainingData = [];
            
            const examples = [
                // –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                { code: 'function add(a, b) { return a + b; }', time: 0.1 },
                { code: 'function multiply(a, b) { return a * b; }', time: 0.1 },
                
                // –§—É–Ω–∫—Ü–∏–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏
                { code: 'function max(a, b) { if (a > b) { return a; } return b; }', time: 0.2 },
                { code: 'function abs(x) { if (x < 0) { return -x; } return x; }', time: 0.2 },
                
                // –§—É–Ω–∫—Ü–∏–∏ —Å —Ü–∏–∫–ª–∞–º–∏
                { code: 'function sum(n) { var s = 0; for (var i = 0; i < n; i++) { s = s + i; } return s; }', time: 1.5 },
                { code: 'function factorial(n) { var r = 1; for (var i = 2; i <= n; i++) { r = r * i; } return r; }', time: 1.8 },
                
                // –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã
                { code: 'function matrix(n) { var s = 0; for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) { s = s + i * j; } } return s; }', time: 5.0 },
                { code: 'function nested(n) { var r = 0; for (var i = 0; i < n; i++) { for (var j = 0; j < n; j++) { r = r + 1; } } return r; }', time: 4.8 },
                
                // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                { code: 'function fib(n) { if (n <= 1) { return n; } return fib(n - 1) + fib(n - 2); }', time: 10.0 },
                { code: 'function power(x, n) { if (n == 0) { return 1; } return x * power(x, n - 1); }', time: 3.5 },
                
                // –°–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                { code: 'function complex(data) { var result = 0; for (var i = 0; i < data; i++) { if (i % 2 == 0) { result = result + i; } else { result = result - i; } } return result; }', time: 2.5 },
                { code: 'function process(arr) { var sum = 0; for (var i = 0; i < arr; i++) { var temp = arr * 2; sum = sum + temp; } return sum; }', time: 2.0 }
            ];
            
            // –°–æ–∑–¥–∞—ë–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            for (let i = 0; i < examples.length; i++) {
                const example = examples[i];
                
                try {
                    // –ü–∞—Ä—Å–∏–º –∫–æ–¥
                    const lexer = new Lexer(example.code);
                    const tokens = lexer.tokenize();
                    const parser = new Parser(tokens);
                    const ast = parser.parse();
                    
                    // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                    const features = featureExtractor.extract(ast);
                    
                    trainingData.push({
                        input: features,
                        target: example.time
                    });
                } catch (error) {
                    console.error('Error processing example:', error);
                }
            }
            
            const output = document.getElementById('trainingOutput');
            output.innerHTML = '<div class="output">' +
                '<span class="success">‚úì –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã</span>\n' +
                '<span class="info">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤: ' + trainingData.length + '</span>\n' +
                '\n–ü—Ä–∏–º–µ—Ä—ã –≤–∫–ª—é—á–∞—é—Ç:\n' +
                '  ‚Ä¢ –ü—Ä–æ—Å—Ç—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (0.1-0.2 ms)\n' +
                '  ‚Ä¢ –§—É–Ω–∫—Ü–∏–∏ —Å —Ü–∏–∫–ª–∞–º–∏ (1.5-2.5 ms)\n' +
                '  ‚Ä¢ –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã (4.8-5.0 ms)\n' +
                '  ‚Ä¢ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (3.5-10.0 ms)\n' +
                '</div>';
            
            console.log('‚úì Training data generated:', trainingData.length, 'samples');
        }
        
        // –û–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
        function startTraining() {
            if (trainingData.length === 0) {
                generateTrainingData();
            }
            
            console.log('Starting neural network training...');
            
            const output = document.getElementById('trainingOutput');
            const progressDiv = document.getElementById('trainingProgress');
            const progressFill = document.getElementById('progressFill');
            
            output.innerHTML = '<div class="output loading">üß† –û–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏...\n\n–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...</div>';
            progressDiv.style.display = 'block';
            
            // –û–±—É—á–∞–µ–º –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º "–ø–æ—Ç–æ–∫–µ" —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI
            setTimeout(() => {
                const epochs = 100;
                let completedEpochs = 0;
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å (—Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏–¥—ë—Ç –±—ã—Å—Ç—Ä–æ)
                const updateProgress = () => {
                    completedEpochs += 10;
                    const percent = (completedEpochs / epochs) * 100;
                    progressFill.style.width = percent + '%';
                    progressFill.textContent = Math.round(percent) + '%';
                    
                    if (completedEpochs < epochs) {
                        setTimeout(updateProgress, 200);
                    }
                };
                
                updateProgress();
                
                // –†–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
                const result = neuralNetwork.train(trainingData, epochs);
                
                output.innerHTML = '<div class="output">' +
                    '<span class="success">‚úì –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</span>\n\n' +
                    '<span class="highlight">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è:</span>\n' +
                    '  ‚Ä¢ –≠–ø–æ—Ö: ' + epochs + '\n' +
                    '  ‚Ä¢ –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: ' + result.finalLoss.toFixed(6) + '\n' +
                    '  ‚Ä¢ –ü—Ä–∏–º–µ—Ä–æ–≤ –æ–±—É—á–µ–Ω–∏—è: ' + trainingData.length + '\n\n' +
                    '<span class="info">–ù–µ–π—Ä–æ—Å–µ—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! –¢–µ–ø–µ—Ä—å –æ–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å\n' +
                    '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ –∏ –ø–æ–º–æ–≥–∞—Ç—å –≤—ã–±–∏—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</span>\n' +
                    '</div>';
                
                console.log('‚úì Training complete');
            }, 100);
        }
        
        // –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
        function analyzeCode() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ–±—É—á–µ–Ω–∞ –ª–∏ —Å–µ—Ç—å
            if (!neuralNetwork || neuralNetwork.trainingHistory.epochs === 0) {
                alert('–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –æ–±—É—á–∏—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç—å! –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ"');
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –∫–æ–¥ –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–±–∞
            const codeInput = document.getElementById('codeInput' + currentTab);
            const code = codeInput.value.trim();
            
            if (!code) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞');
                return;
            }
            
            console.log('Analyzing code...');
            
            const output = document.getElementById('analysisOutput');
            output.innerHTML = '<div class="output loading">üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–¥...</div>';
            
            try {
                // –ü–∞—Ä—Å–∏–º –∫–æ–¥
                const lexer = new Lexer(code);
                const tokens = lexer.tokenize();
                const parser = new Parser(tokens);
                const ast = parser.parse();
                
                // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                featureExtractor.extract(ast);
                const featureVector = featureExtractor.buildFeatureVector();
                const featureDesc = featureExtractor.getFeatureDescription();
                
                // –í—ã–±–∏—Ä–∞–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
                const strategy = optimizationSelector.selectOptimizations(featureExtractor, neuralNetwork);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                displayResults(featureDesc, strategy);
                
                output.innerHTML = '<div class="output">' +
                    '<span class="success">‚úì –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω</span>\n\n' +
                    '–ò–∑–≤–ª–µ—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫: ' + featureVector.length + '\n' +
                    '–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ' + strategy.baselinePerformance.toFixed(2) + ' ms\n' +
                    '–í—ã–±—Ä–∞–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π: ' + strategy.selectedOptimizations.length + '\n' +
                    '–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ: ' + strategy.totalImprovementPercent.toFixed(1) + '%\n' +
                    '</div>';
                
                console.log('‚úì Analysis complete');
            } catch (error) {
                output.innerHTML = '<div class="output">' +
                    '<span style="color: #ef4444;">‚úó –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞:</span>\n\n' +
                    error.message + '\n' +
                    '</div>';
                console.error('Analysis error:', error);
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults(features, strategy) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('resultsSection').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º summary
            document.getElementById('baselinePerf').textContent = strategy.baselinePerformance.toFixed(2) + ' ms';
            document.getElementById('optimizedPerf').textContent = strategy.estimatedFinalPerformance.toFixed(2) + ' ms';
            document.getElementById('improvement').textContent = strategy.totalImprovementPercent.toFixed(1) + '%';
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
            const featuresDisplay = document.getElementById('featuresDisplay');
            featuresDisplay.innerHTML = `
                <div class="feature-card">
                    <h4>–°—Ç—Ä—É–∫—Ç—É—Ä–∞</h4>
                    <div class="feature-item">
                        <span class="feature-label">–í—Å–µ–≥–æ —É–∑–ª–æ–≤:</span>
                        <span class="feature-value">${features.structural.totalNodes}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞:</span>
                        <span class="feature-value">${features.structural.maxDepth}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–í–µ—Ç–≤–ª–µ–Ω–∏–µ:</span>
                        <span class="feature-value">${features.structural.branchingFactor}</span>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>–û–ø–µ—Ä–∞—Ü–∏–∏</h4>
                    <div class="feature-item">
                        <span class="feature-label">–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞:</span>
                        <span class="feature-value">${features.operations.counts.arithmetic}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–°—Ä–∞–≤–Ω–µ–Ω–∏—è:</span>
                        <span class="feature-value">${features.operations.counts.comparison}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å:</span>
                        <span class="feature-value">${features.operations.density}</span>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>–¶–∏–∫–ª—ã</h4>
                    <div class="feature-item">
                        <span class="feature-label">–í—Å–µ–≥–æ:</span>
                        <span class="feature-value">${features.loops.total}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–í–ª–æ–∂–µ–Ω–Ω—ã–µ:</span>
                        <span class="feature-value">${features.loops.nested}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
                        <span class="feature-value">${features.loops.complexity}</span>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>–°–ª–æ–∂–Ω–æ—Å—Ç—å</h4>
                    <div class="feature-item">
                        <span class="feature-label">–¶–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è:</span>
                        <span class="feature-value">${features.complexity.cyclomatic}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–§—É–Ω–∫—Ü–∏–π:</span>
                        <span class="feature-value">${features.callGraph.functions}</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-label">–í—ã–∑–æ–≤–æ–≤:</span>
                        <span class="feature-value">${features.callGraph.calls}</span>
                    </div>
                </div>
            `;
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
            const optimizationsDisplay = document.getElementById('optimizationsDisplay');
            let optimizationsHTML = '';
            
            strategy.allEvaluations.forEach(eval => {
                const opt = eval.optimization;
                const isSelected = strategy.selectedOptimizations.some(s => s.name === opt.name);
                
                optimizationsHTML += `
                    <div class="optimization-item ${isSelected ? '' : 'skipped'}">
                        <div class="optimization-title">
                            ${isSelected ? '‚úì' : '‚úó'} ${opt.displayName}
                        </div>
                        <div class="optimization-desc">${opt.description}</div>
                        ${eval.applicable ? `
                            <div class="optimization-stats">
                                <div class="stat">
                                    <span class="stat-label">–û–∂–∏–¥–∞–µ–º–∞—è –ø–æ–ª—å–∑–∞:</span>
                                    <span class="stat-value">${(eval.expectedBenefit * 100).toFixed(1)}%</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                    <span class="stat-value">${opt.cost}</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-label">–ö–∞—á–µ—Å—Ç–≤–æ:</span>
                                    <span class="stat-value">${eval.qualityScore.toFixed(3)}</span>
                                </div>
                            </div>
                        ` : `
                            <div style="color: #ef4444; margin-top: 10px;">
                                ${eval.reason}
                            </div>
                        `}
                    </div>
                `;
            });
            
            optimizationsDisplay.innerHTML = optimizationsHTML;
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        // –û—á–∏—Å—Ç–∫–∞ output
        function clearOutput() {
            document.getElementById('analysisOutput').innerHTML = '';
            document.getElementById('resultsSection').style.display = 'none';
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = init;
    </script>
</body>
</html>
